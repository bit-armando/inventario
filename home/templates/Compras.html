{% extends "base.html" %}

{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static "css/Compras.css" %}">
<section>
    <section class="general">
        <div class="container">
            <div class="buscador-y-botones">
                <a href="{% url "index" %}">
                    <button id="inventario">Inventario</button>
                </a>
                <a href="{% url "ventas" %}">
                    <button id="ventas">Ventas</button>
                </a>
                <a href="{% url "proveedores" %}">
                    <button id="proveedores">Proveedores</button>
                </a>
                <a href="#" onclick="window.modal.showModal();">
                    <button id="registro-compra">Registrar Compra</button>
                </a>

                <dialog class="modal" id="modal">
                    <form method="post" action="{% url 'registrar_compras' %}">
                        {% csrf_token %}
                        <div class="contenido">
                            <!-- Nombre del producto -->
                            <label for="producto">Nombre Producto:</label>
                            <input name="producto" type="text" id="producto"/>
                            <br>
                            
                            <!-- Clave del producto -->
                            <label for="clave">Clave: <br></label>
                            <select name="clave" id="clave">
                                {% for producto in productos %}
                                <option value={{producto.id_producto}}>{{ producto.id_producto }}</option>
                                {% endfor %}
                            </select>
                            <br>

                            <!-- Precio de compra -->
                            <label for="precio_unitario">Precio de compra: </lable>
                            <input name="precio_unitario" type="number" id="precio_unitario"/>
                            <br>

                            <!-- Descripcion -->
                            <label for="descripcion">Descripcion: </label>
                            <textarea name="descripcion" cols="30" rows="10" id="descripcion"></textarea>
                            <br>
                            
                            <!-- Precio de venta -->
                            <label for="precio_venta">Precio sin IVA: </label>
                            <input name="precio_venta" type="number" id="precio_venta"/>
                            <br>
                                
                            <!-- Cantidad de productos -->
                            <label for="cantidad">Cantidad a ingresar: </label>
                            <input name="cantidad" type="number" id="cantidad"/>
                            <br>

                            <!-- Categoria del producto -->
                            <label for="categoria">Categoría: <br></label>
                            <select name="categoria" id="categoria">
                                {% for categoria in categorias %}
                                <option value={{ categoria.nombre }}>{{ categoria.nombre }}</option>
                                {% endfor %}
                            </select>
                            <br>

                            <!-- Proveedor del producto -->
                            <label for="proveedor">Proveedor: <br></label>
                            <select name="proveedor" id="proveedor">
                                {% for proveedor in proveedores %}
                                <option value={{proveedor.id_proveedor}}>{{ proveedor.nombre }}</option>
                                {% endfor %}
                            </select>
                        </div>
                        <div class="boton-salida">
                            <input class="boton-input" type="submit" value="Generar Venta">
                            <button onclick="window.modal.close()">Cerrar</button>
                        </div>
                    </form>
                </dialog>

                <form method="get" action="">
                    <input id="buscador" name="buscador" type="search" placeholder="Buscar compra"/>
                </form>
                <div id="inventario-total">
                    <p>Total</p>
                    <hr>
                    <p id="total">$14,322.80</p>
                </div>
            </div>

            <div class="tabla-compras">
                <table>
                    <tr>
                        <th>Categoría</th>
                        <th>Clave</th>
                        <th>Costo unitario</th>
                        <th>Fecha</th>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Total</th>
                    </tr>
                    {% for compra in compras %}
                    <tr>
                        <td>{{ compra.categoria }}</td>
                        <td>{{ compra.id_entrada }}</td>
                        <td>{{ compra.descripcion }}</td>
                        <td>{{ compra.cantidad }}</td>
                        <td>{{ compra.cantidad }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div>
        </div>
    </section>
</section>
{% endblock %}